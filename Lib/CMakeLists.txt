# Set source file(s)
set(SOURCES Target/Subst.cpp Target/BufferObject.cpp Target/Pretty.cpp Target/instr/ALUOp.cpp Target/instr/RegOrImm.cpp Target/instr/Conditions.cpp Target/instr/Reg.cpp Target/instr/ALUInstruction.cpp Target/instr/Instr.cpp Target/instr/Label.cpp Target/instr/Imm.cpp Target/instr/Mnemonics.cpp Target/SmallLiteral.cpp Target/EmuSupport.cpp Target/Emulator.cpp Target/Satisfy.cpp BaseKernel.cpp Source/Lang.cpp Source/Cond.cpp Source/OpItems.cpp Source/Interpreter.cpp Source/Translate.cpp Source/Ptr.cpp Source/Pretty.cpp Source/BExpr.cpp Source/Int.cpp Source/Functions.cpp Source/gather.cpp Source/Op.cpp Source/Expr.cpp Source/StmtStack.cpp Source/CExpr.cpp Source/Float.cpp Source/Complex.cpp Source/Var.cpp Source/Stmt.cpp Support/debug.cpp Support/Timer.cpp Support/InstructionComment.cpp Support/basics.cpp Support/RegIdSet.cpp Support/pgm.cpp Support/Helpers.cpp Support/Platform.cpp Support/HeapManager.cpp SourceTranslate.cpp Common/SharedArray.cpp Common/BufferObject.cpp Common/CompileData.cpp Kernels/DotVector.cpp Kernels/Cursor.cpp Kernels/Rot3D.cpp Kernels/ComplexDotVector.cpp Kernels/Matrix.cpp Liveness/Range.cpp Liveness/LiveSet.cpp Liveness/UseDef.cpp Liveness/Optimizations.cpp Liveness/RegUsage.cpp Liveness/Liveness.cpp Liveness/CFG.cpp LibSettings.cpp v3d/PerformanceCounters.cpp v3d/v3d.cpp v3d/BufferObject.cpp v3d/SourceTranslate.cpp v3d/instr/Source.cpp v3d/instr/RFAddress.cpp v3d/instr/OpItems.cpp v3d/instr/Snippets.cpp v3d/instr/SmallImm.cpp v3d/instr/Encode.cpp v3d/instr/Register.cpp v3d/instr/Instr.cpp v3d/instr/Mnemonics.cpp v3d/Driver.cpp v3d/RegisterMapping.cpp v3d/KernelDriver.cpp vc4/PerformanceCounters.cpp vc4/Mailbox.cpp vc4/BufferObject.cpp vc4/SourceTranslate.cpp vc4/RegAlloc.cpp vc4/Invoke.cpp vc4/RegisterMap.cpp vc4/Instr.cpp vc4/DMA/Helpers.cpp vc4/DMA/DMA.cpp vc4/DMA/LoadStore.cpp vc4/DMA/Operations.cpp vc4/vc4.cpp vc4/KernelDriver.cpp KernelDriver.cpp v3d/instr/v3d_api.c vc4/dump_instr.c)
set(HEADERS Target/Subst.h Target/BufferObject.h Target/Pretty.h Target/instr/ALUOp.h Target/instr/RegOrImm.h Target/instr/Conditions.h Target/instr/Reg.h Target/instr/ALUInstruction.h Target/instr/Instr.h Target/instr/Label.h Target/instr/Imm.h Target/instr/Mnemonics.h Target/SmallLiteral.h Target/EmuSupport.h Target/Emulator.h Target/Satisfy.h BaseKernel.h Source/Lang.h Source/Cond.h Source/OpItems.h Source/Interpreter.h Source/Translate.h Source/Ptr.h Source/Pretty.h Source/BExpr.h Source/Int.h Source/Functions.h Source/gather.h Source/Op.h Source/Expr.h Source/StmtStack.h Source/CExpr.h Source/Float.h Source/Complex.h Source/Var.h Source/Stmt.h Support/debug.h Support/Timer.h Support/InstructionComment.h Support/basics.h Support/RegIdSet.h Support/pgm.h Support/Helpers.h Support/Platform.h Support/HeapManager.h SourceTranslate.h Common/SharedArray.h Common/BufferObject.h Common/CompileData.h Kernels/DotVector.h Kernels/Cursor.h Kernels/Rot3D.h Kernels/ComplexDotVector.h Kernels/Matrix.h Liveness/Range.h Liveness/LiveSet.h Liveness/UseDef.h Liveness/Optimizations.h Liveness/RegUsage.h Liveness/Liveness.h Liveness/CFG.h LibSettings.h v3d/PerformanceCounters.h v3d/v3d.h v3d/BufferObject.h v3d/SourceTranslate.h v3d/instr/Source.h v3d/instr/RFAddress.h v3d/instr/OpItems.h v3d/instr/Snippets.h v3d/instr/SmallImm.h v3d/instr/Encode.h v3d/instr/Register.h v3d/instr/Instr.h v3d/instr/Mnemonics.h v3d/Driver.h v3d/RegisterMapping.h v3d/KernelDriver.h vc4/PerformanceCounters.h vc4/Mailbox.h vc4/BufferObject.h vc4/SourceTranslate.h vc4/RegAlloc.h vc4/Invoke.h vc4/RegisterMap.h vc4/Instr.h vc4/DMA/Helpers.h vc4/DMA/DMA.h vc4/DMA/LoadStore.h vc4/DMA/Operations.h vc4/vc4.h vc4/KernelDriver.h KernelDriver.h v3d/instr/v3d_api.h vc4/dump_instr.h)

add_library(v3dlib STATIC "")
target_sources(v3dlib PRIVATE ${SOURCES} PUBLIC ${HEADERS})
target_include_directories(v3dlib PUBLIC ${CMAKE_CURRENT_LIST_DIR} Common Kernels Liveness Source Support Target Target/instr v3d vc4)
target_link_libraries(v3dlib mesa)
add_definitions(
        -DDEBUG
)